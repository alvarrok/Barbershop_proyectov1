generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Admin {
  id        Int       @id @default(autoincrement())
  nombre    String    @db.VarChar(100)
  email     String    @unique @db.VarChar(150)
  password  String    @map("password_hash") @db.VarChar(255)
  createdAt DateTime? @default(now()) @map("creado_en") @db.Timestamp(6)

  @@map("admins")
}

model Service {
  id           Int           @id @default(autoincrement())
  nombre       String        @db.VarChar(100)
  descripcion  String?
  precio       Decimal       @db.Decimal(10, 2)
  duracion     Int           @map("duracion_minutos")
  activo       Boolean?      @default(true)
  appointments Appointment[]

  @@map("services")
}

model Appointment {
  id            Int       @id @default(autoincrement())
  clienteNombre String    @map("cliente_nombre") @db.VarChar(100)
  clienteDni    String    @map("cliente_dni") @db.VarChar(20)
  clientePhone  String    @map("cliente_telefono") @db.VarChar(20)
  fechaInicio   DateTime  @map("fecha_cita") @db.Timestamp(6)
  fechaFin      DateTime  @map("fecha_fin") @db.Timestamp(6)
  estado        String?   @default("PENDIENTE") @db.VarChar(20)
  serviceId     Int       @map("service_id")
  createdAt     DateTime? @default(now()) @map("creado_en") @db.Timestamp(6)
  service       Service   @relation(fields: [serviceId], references: [id], onUpdate: NoAction, map: "fk_servicio")

  @@index([clientePhone], map: "idx_cliente_telefono")
  @@index([fechaInicio], map: "idx_fecha_cita")
  @@map("appointments")
}
